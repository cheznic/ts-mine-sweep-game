!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.TILE_WIDTH=22,e.TILE_HEIGHT=22,e.ROWS=30,e.COLS=30,e.BOMB_COUNT=110,e.HEIGHT=e.ROWS*e.TILE_HEIGHT,e.WIDTH=e.COLS*e.TILE_WIDTH,e.BG_COLOR="#335577",e}();t.Config=i}.apply(t,[i,t]))||(e.exports=n)},function(e,t,i){var n,o;n=[i,t,i(2)],void 0===(o=function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.addEventListener("load",function(){(new i.Game).start()})}.apply(t,n))||(e.exports=o)},function(e,t,i){var n,o;n=[i,t,i(3),i(4),i(6),i(7),i(0)],void 0===(o=function(e,t,i,n,o,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return function(){var e=this;this.stage=new r.Stage("minefield"),this.mineField=new n.MineField,this.timer=i.Timer.getInstance("timerDiv"),this.scoreBoard=o.ScoreBoard.getInstance("scoreBoardDiv"),this.over=!0,this.score=0,this.show=function(){if(null!=e.stage.context){e.stage.context.clearRect(0,0,a.Config.WIDTH,a.Config.HEIGHT);for(var t=0;t<a.Config.COLS;t++){for(var i=0;i<a.Config.ROWS;i++){var n=e.mineField.getTile(t,i),o=n.getImage(e.over);if(e.stage.context.drawImage(o,t*a.Config.TILE_WIDTH,i*a.Config.TILE_HEIGHT,a.Config.TILE_WIDTH,a.Config.TILE_HEIGHT),n.adjacentBombs>0&&n.isClicked){switch(n.adjacentBombs){case 1:e.stage.context.fillStyle="#229954";break;case 2:e.stage.context.fillStyle="#8E44AD";break;case 3:e.stage.context.fillStyle="#2980B9";break;case 4:e.stage.context.fillStyle="#E74C3C";break;case 5:e.stage.context.fillStyle="#D35400";break;case 6:e.stage.context.fillStyle="#2BAEAA";break;case 7:e.stage.context.fillStyle="#C0392B";break;case 8:e.stage.context.fillStyle="#2E86C1"}e.stage.context.font="bold 13px Arial",e.stage.context.textAlign="center",e.stage.context.fillText(n.adjacentBombs.toString(),n.x+a.Config.TILE_HEIGHT/2,n.y+(a.Config.TILE_WIDTH/2+5))}}e.score>=a.Config.COLS*a.Config.ROWS-a.Config.BOMB_COUNT&&e.win()}}else console.log("Error: canvas context is null, exiting")},this.win=function(){null!=e.stage.context?(e.stage.context.font="100px Righteous",e.stage.context.fillStyle=e.getRandomColor(),e.stage.context.textAlign="center",e.stage.context.shadowColor="#7f7f7f",e.stage.context.shadowOffsetX=1,e.stage.context.shadowOffsetY=1,e.stage.context.shadowBlur=3,e.stage.context.fillText("You Win!",a.Config.TILE_WIDTH*a.Config.COLS/2,a.Config.TILE_WIDTH*a.Config.ROWS/2+22)):console.log("Error: canvas context is null, exiting")},this.getRandomColor=function(){return"hsla("+Math.floor(360*Math.random())+", 100%, 75%, 1)"},this.handleTileClick=function(t){if(!e.over){var i=t,n=e.mineField.getTile(i.detail.tile.x,i.detail.tile.y);n.isFlagged||n.isClicked||(n.isClicked=!0,n.hasBomb?e.end():(e.score++,e.scoreBoard.score=e.score,e.score>=a.Config.COLS*a.Config.ROWS-a.Config.BOMB_COUNT&&e.end()),0==n.adjacentBombs&&e.clearOpenTiles(n),e.show())}},this.clearOpenTiles=function(t){for(var i=-1;i<2;i++)for(var n=-1;n<2;n++){var o=t.col+i,r=t.row+n;if(o>=0&&o<a.Config.COLS&&r>=0&&r<a.Config.ROWS){if(0==i&&0==n)continue;var s=e.mineField.getTile(o,r);if(s.hasBomb)continue;if(s.isClicked)continue;s.isClicked=!0,e.score++,e.scoreBoard.score=e.score,0==s.adjacentBombs&&e.clearOpenTiles(s)}}},this.handleTileRightClick=function(t){var i=t,n=e.mineField.getTile(i.detail.tile.x,i.detail.tile.y);n.isFlagged=!n.isFlagged,e.show()},this.end=function(){e.over=!0,e.timer.stop()},this.start=function(){e.over=!1,e.score=0,e.scoreBoard.score=e.score,e.mineField.makeGrid(a.Config.ROWS,a.Config.COLS),e.mineField.scatterBombs(a.Config.BOMB_COUNT),e.show(),e.timer.start()},this.stage.bgColor=a.Config.BG_COLOR,this.stage.size(a.Config.WIDTH,a.Config.HEIGHT),this.scoreBoard.score=0;var t=document.getElementById("startButton");null!=t?(window.addEventListener("startButtonClickedEvent",this.start,!1),t.onclick=function(){dispatchEvent(new Event("startButtonClickedEvent"))},this.mineField.makeGrid(a.Config.ROWS,a.Config.COLS),this.mineField.scatterBombs(a.Config.BOMB_COUNT),window.addEventListener("tileClickedEvent",this.handleTileClick,!1),window.addEventListener("tileRightClickedEvent",this.handleTileRightClick,!1)):console.log("Error: start button didn't initialize")}}();t.Game=s}.apply(t,n))||(e.exports=o)},function(e,t,i){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.time=0,this.intervalId=0,this.div=document.getElementById(e),this.div.innerHTML="00:00:00"}return e.getInstance=function(t){return e.INSTANCE||(e.INSTANCE=new e(t)),e.INSTANCE},e.prototype.start=function(){e.INSTANCE.stop(),e.INSTANCE.time=0,e.INSTANCE.div.innerHTML=n(e.INSTANCE.time),e.INSTANCE.intervalId=setInterval(function(){e.INSTANCE.time++,e.INSTANCE.div.innerHTML=n(e.INSTANCE.time)},1e3)},e.prototype.stop=function(){clearInterval(e.INSTANCE.intervalId)},e}();function n(e){var t=Math.floor(e),i=Math.floor(t/3600);t-=3600*i;var n=Math.floor(t/60);return t-=60*n,"Time: "+("00"+i).slice(-2)+":"+("00"+n).slice(-2)+":"+("00"+t).slice(-2)}t.Timer=i}.apply(t,[i,t]))||(e.exports=n)},function(e,t,i){var n,o;n=[i,t,i(5),i(0)],void 0===(o=function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(){var e=this;this.makeGrid=function(t,o){for(var r=0;r<o;r++){e.tiles[r]=[];for(var a=0;a<t;a++)e.tiles[r][a]=new i.Tile(r,a),e.tiles[r][a].x=r*n.Config.TILE_WIDTH,e.tiles[r][a].y=a*n.Config.TILE_HEIGHT,e.tiles[r][a].row=a,e.tiles[r][a].col=r}},this.scatterBombs=function(t){var i=n.Config.COLS*n.Config.ROWS;e:for(var o=0;o<t;o++)for(var r=Math.floor(Math.random()*i),a=0,s=0;s<n.Config.COLS;s++)for(var l=0;l<n.Config.ROWS;l++){if(a==r){if(e.tiles[s][l].hasBomb){o--;continue e}e.tiles[s][l].hasBomb=!0}a++}for(s=0;s<n.Config.COLS;s++)for(l=0;l<n.Config.ROWS;l++)e.tiles[s][l].hasBomb||(e.tiles[s][l].adjacentBombs=e.countAdjacentBombs(e.tiles[s][l]))},this.countAdjacentBombs=function(t){for(var i=0,o=-1;o<2;o++)for(var r=-1;r<2;r++){var a=t.col+o,s=t.row+r;a>=0&&a<n.Config.COLS&&s>=0&&s<n.Config.ROWS&&e.tiles[a][s].hasBomb&&i++}return i},this.getTile=function(t,i){return e.tiles[t][i]},this.setTile=function(t,i,n){e.tiles[t][i]=n},this.tiles=[]}}();t.MineField=o}.apply(t,n))||(e.exports=o)},function(e,t,i){var n,o;n=[i,t,i(0)],void 0===(o=function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.x=-1,this.y=-1,this.row=-1,this.col=-1,this.hasBomb=!1,this.isClicked=!1,this.isFlagged=!1,this.adjacentBombs=-1,this.x=e,this.y=t}return e.prototype.getImage=function(t){return t&&this.hasBomb?e.images.bomb.image:this.isClicked&&0==this.adjacentBombs?e.images.zero.image:this.isClicked&&this.adjacentBombs>0?e.images.number.image:this.isFlagged?e.images.flag.image:e.images.tile.image},e.initImage=function(e,t,i){var n=new Image(e,t);return n.src=i,n},e.images={tile:{image:e.initImage(i.Config.TILE_WIDTH,i.Config.TILE_HEIGHT,"./img/tile.png")},flag:{image:e.initImage(i.Config.TILE_WIDTH,i.Config.TILE_HEIGHT,"./img/flag.png")},number:{image:e.initImage(i.Config.TILE_WIDTH,i.Config.TILE_HEIGHT,"./img/number.png")},bomb:{image:e.initImage(i.Config.TILE_WIDTH,i.Config.TILE_HEIGHT,"./img/bomb.png")},zero:{image:e.initImage(i.Config.TILE_WIDTH,i.Config.TILE_HEIGHT,"./img/zero.png")}},e}();t.Tile=n}.apply(t,n))||(e.exports=o)},function(e,t,i){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this._score=0,this.div=document.getElementById(e),this.div.innerHTML="000"}return e.getInstance=function(t){return e.INSTANCE||(e.INSTANCE=new e(t)),e.INSTANCE},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e,this.div.innerHTML="Score: "+("000"+e).slice(-3)},enumerable:!0,configurable:!0}),e}();t.ScoreBoard=i}.apply(t,[i,t]))||(e.exports=n)},function(e,t,i){var n,o;n=[i,t,i(8),i(0)],void 0===(o=function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.canvas=document.getElementById(e),this.canvas.focus(),this.context=this.canvas.getContext("2d"),null!=this.context?(this.canvas.addEventListener("click",function(e){t.handleClick(e)}),this.canvas.addEventListener("contextmenu",function(e){t.handleRightClick(e)})):console.log("Error: Canvas failed to initialize")}return e.prototype.size=function(e,t){this.canvas.setAttribute("width",e.toString()),this.canvas.setAttribute("height",t.toString())},Object.defineProperty(e.prototype,"bgColor",{set:function(e){this.canvas.style.backgroundColor=e},enumerable:!0,configurable:!0}),e.prototype.handleClick=function(e){e.preventDefault(),e.stopPropagation();var t=new i.Coordinate(e.offsetX||e.layerX,e.offsetY||e.layerY),o=new i.Coordinate(Math.floor(t.x/n.Config.TILE_WIDTH),Math.floor(t.y/n.Config.TILE_HEIGHT)),r=new CustomEvent("tileClickedEvent",{detail:{tile:{x:o.x,y:o.y}}});window.dispatchEvent(r)},e.prototype.handleRightClick=function(e){e.preventDefault(),e.stopPropagation();var t=new i.Coordinate(e.offsetX||e.layerX,e.offsetY||e.layerY),o=new i.Coordinate(Math.floor(t.x/n.Config.TILE_WIDTH),Math.floor(t.y/n.Config.TILE_HEIGHT)),r=new CustomEvent("tileRightClickedEvent",{detail:{tile:{x:o.x,y:o.y}}});window.dispatchEvent(r)},e}();t.Stage=o}.apply(t,n))||(e.exports=o)},function(e,t,i){var n;void 0===(n=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t){this.x=e,this.y=t}}();t.Coordinate=i}.apply(t,[i,t]))||(e.exports=n)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RpbWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9taW5lZmllbGQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Njb3JlYm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YWdlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb29yZGluYXRlLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ29uZmlnIiwiVElMRV9XSURUSCIsIlRJTEVfSEVJR0hUIiwiUk9XUyIsIkNPTFMiLCJCT01CX0NPVU5UIiwiSEVJR0hUIiwiV0lEVEgiLCJCR19DT0xPUiIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJnYW1lXzEiLCJHYW1lIiwic3RhcnQiLCJfdGhpcyIsInRoaXMiLCJzdGFnZSIsInN0YWdlXzEiLCJTdGFnZSIsIm1pbmVGaWVsZCIsIm1pbmVmaWVsZF8xIiwiTWluZUZpZWxkIiwidGltZXIiLCJ0aW1lcl8xIiwiVGltZXIiLCJnZXRJbnN0YW5jZSIsInNjb3JlQm9hcmQiLCJzY29yZWJvYXJkXzEiLCJTY29yZUJvYXJkIiwib3ZlciIsInNjb3JlIiwic2hvdyIsImNvbnRleHQiLCJjbGVhclJlY3QiLCJjb25maWdfMSIsIngiLCJ5IiwidGlsZSIsImdldFRpbGUiLCJpbWFnZSIsImdldEltYWdlIiwiZHJhd0ltYWdlIiwiYWRqYWNlbnRCb21icyIsImlzQ2xpY2tlZCIsImZpbGxTdHlsZSIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJmaWxsVGV4dCIsInRvU3RyaW5nIiwid2luIiwiY29uc29sZSIsImxvZyIsImdldFJhbmRvbUNvbG9yIiwic2hhZG93Q29sb3IiLCJzaGFkb3dPZmZzZXRYIiwic2hhZG93T2Zmc2V0WSIsInNoYWRvd0JsdXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJoYW5kbGVUaWxlQ2xpY2siLCJldmVudCIsImUiLCJkZXRhaWwiLCJpc0ZsYWdnZWQiLCJoYXNCb21iIiwiZW5kIiwiY2xlYXJPcGVuVGlsZXMiLCJjb2wiLCJyb3ciLCJoYW5kbGVUaWxlUmlnaHRDbGljayIsInN0b3AiLCJtYWtlR3JpZCIsInNjYXR0ZXJCb21icyIsImJnQ29sb3IiLCJzaXplIiwic3RhcnRCdXR0b24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib25jbGljayIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImRpdk5hbWUiLCJ0aW1lIiwiaW50ZXJ2YWxJZCIsImRpdiIsImlubmVySFRNTCIsIklOU1RBTkNFIiwiZm9ybWF0VGltZSIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInNlY29uZHMiLCJzZWMiLCJob3VycyIsIm1pbnV0ZXMiLCJzbGljZSIsInJvd3MiLCJjb2xzIiwidGlsZXMiLCJ0aWxlXzEiLCJUaWxlIiwiYm9tYkNvdW50IiwidG90YWwiLCJMb29wMSIsImJvbWJJbmRleCIsInh5SW5kZXgiLCJjb3VudEFkamFjZW50Qm9tYnMiLCJzZXRUaWxlIiwiZ2FtZU92ZXIiLCJpbWFnZXMiLCJib21iIiwiemVybyIsIm51bWJlciIsImZsYWciLCJpbml0SW1hZ2UiLCJ3aWR0aCIsImhlaWdodCIsImZpbGUiLCJpbWciLCJJbWFnZSIsInNyYyIsIl9zY29yZSIsImNhbnZhc05hbWUiLCJjYW52YXMiLCJmb2N1cyIsImdldENvbnRleHQiLCJoYW5kbGVDbGljayIsImhhbmRsZVJpZ2h0Q2xpY2siLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwicG9pbnQiLCJjb29yZGluYXRlXzEiLCJDb29yZGluYXRlIiwib2Zmc2V0WCIsImxheWVyWCIsIm9mZnNldFkiLCJsYXllclkiLCJjb29yZGluYXRlIiwiY3VzdEV2ZW50IiwiQ3VzdG9tRXZlbnQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFB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NUQsR0FBYXhFLEVBQUEySyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGNsYXNzIENvbmZpZyB7XG4gICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFRJTEVfV0lEVEg6IG51bWJlciA9IDIyO1xuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBUSUxFX0hFSUdIVDogbnVtYmVyID0gMjI7XG4gICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJPV1MgPSAzMDtcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ09MUyA9IDMwO1xuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBCT01CX0NPVU5UID0gMTEwO1xuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBIRUlHSFQgPSAoQ29uZmlnLlJPV1MgKiBDb25maWcuVElMRV9IRUlHSFQpO1xuICAgcHVibGljIHN0YXRpYyByZWFkb25seSBXSURUSCA9IChDb25maWcuQ09MUyAqIENvbmZpZy5USUxFX1dJRFRIKTtcbiAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQkdfQ09MT1IgPSAnIzMzNTU3Nyc7XG59IiwiLypcbiAqIEF1dGhvcjogQ2hhcmxlcyBOaWNvbGV0dGlcbiAqIFZlcnNpb246IDAuMC4xXG4gKiBEYXRlOiBKYW51YXJ5IDE4LCAyMDE5IFxuICogUHJvZHVjdDogTWluZSBTd2VlcCBHYW1lXG4gKiBcbiAqIENvcHlyaWdodCAyMDE5IENoYXJsZXMgTmljb2xldHRpXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgR2FtZSB9IGZyb20gJy4vZ2FtZSc7XG5cbi8vIExvYWQgdGhlIGdhbWUgYWZ0ZXIgdGhlIHBhZ2UgaXMgZnVsbHkgbG9hZGVkXG52YXIgZ2FtZTogR2FtZTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICBnYW1lID0gbmV3IEdhbWUoKTtcbiAgIGdhbWUuc3RhcnQoKTtcbn0pO1xuIiwiaW1wb3J0IHsgVGltZXIgfSBmcm9tICcuL3RpbWVyJztcbmltcG9ydCB7IFRpbGUgfSBmcm9tICcuL3RpbGUnO1xuaW1wb3J0IHsgTWluZUZpZWxkIH0gZnJvbSAnLi9taW5lZmllbGQnO1xuaW1wb3J0IHsgU2NvcmVCb2FyZCB9IGZyb20gJy4vc2NvcmVib2FyZCc7XG5pbXBvcnQgeyBTdGFnZSB9IGZyb20gJy4vc3RhZ2UnO1xuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuXG5leHBvcnQgY2xhc3MgR2FtZSB7XG5cbiAgIHByaXZhdGUgcmVhZG9ubHkgc3RhZ2UgPSBuZXcgU3RhZ2UoJ21pbmVmaWVsZCcpO1xuICAgcHJpdmF0ZSByZWFkb25seSBtaW5lRmllbGQgPSBuZXcgTWluZUZpZWxkKCk7XG4gICBwcml2YXRlIHJlYWRvbmx5IHRpbWVyID0gVGltZXIuZ2V0SW5zdGFuY2UoJ3RpbWVyRGl2Jyk7XG4gICBwcml2YXRlIHJlYWRvbmx5IHNjb3JlQm9hcmQgPSBTY29yZUJvYXJkLmdldEluc3RhbmNlKCdzY29yZUJvYXJkRGl2Jyk7XG4gICBwdWJsaWMgb3ZlcjogYm9vbGVhbiA9IHRydWU7XG4gICBwdWJsaWMgc2NvcmU6IG51bWJlciA9IDA7XG5cbiAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgLy8gaW5pdCBzdGFnZVxuICAgICAgdGhpcy5zdGFnZS5iZ0NvbG9yID0gQ29uZmlnLkJHX0NPTE9SO1xuICAgICAgdGhpcy5zdGFnZS5zaXplKENvbmZpZy5XSURUSCwgQ29uZmlnLkhFSUdIVCk7XG5cbiAgICAgIC8vIGluaXQgc2NvcmVib2FyZFxuICAgICAgdGhpcy5zY29yZUJvYXJkLnNjb3JlID0gMDtcblxuICAgICAgLy8gaW5pdCBzdGFydCBidXR0b25cbiAgICAgIGxldCBzdGFydEJ1dHRvbiA9IDxIVE1MQnV0dG9uRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRCdXR0b24nKTtcbiAgICAgIGlmIChzdGFydEJ1dHRvbiA9PSBudWxsKSB7XG4gICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOiBzdGFydCBidXR0b24gZGlkbid0IGluaXRpYWxpemVcIik7XG4gICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RhcnRCdXR0b25DbGlja2VkRXZlbnQnLCB0aGlzLnN0YXJ0LCBmYWxzZSk7XG4gICAgICBzdGFydEJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkgeyBkaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnc3RhcnRCdXR0b25DbGlja2VkRXZlbnQnKSkgfTtcblxuICAgICAgLy8gaW5pdCBtaW5lZmllbGRcbiAgICAgIHRoaXMubWluZUZpZWxkLm1ha2VHcmlkKENvbmZpZy5ST1dTLCBDb25maWcuQ09MUyk7XG4gICAgICB0aGlzLm1pbmVGaWVsZC5zY2F0dGVyQm9tYnMoQ29uZmlnLkJPTUJfQ09VTlQpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RpbGVDbGlja2VkRXZlbnQnLCB0aGlzLmhhbmRsZVRpbGVDbGljaywgZmFsc2UpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RpbGVSaWdodENsaWNrZWRFdmVudCcsIHRoaXMuaGFuZGxlVGlsZVJpZ2h0Q2xpY2ssIGZhbHNlKTtcbiAgIH1cblxuICAgcHVibGljIHNob3cgPSAoKSA9PiB7XG5cbiAgICAgIGlmICh0aGlzLnN0YWdlLmNvbnRleHQgPT0gbnVsbCkge1xuICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiBjYW52YXMgY29udGV4dCBpcyBudWxsLCBleGl0aW5nJyk7XG4gICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnN0YWdlLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIENvbmZpZy5XSURUSCwgQ29uZmlnLkhFSUdIVCk7XG5cbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgQ29uZmlnLkNPTFM7IHgrKykge1xuICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBDb25maWcuUk9XUzsgeSsrKSB7XG4gICAgICAgICAgICBsZXQgdGlsZSA9IHRoaXMubWluZUZpZWxkLmdldFRpbGUoeCwgeSk7XG4gICAgICAgICAgICBsZXQgaW1hZ2UgPSB0aWxlLmdldEltYWdlKHRoaXMub3Zlcik7XG4gICAgICAgICAgICB0aGlzLnN0YWdlLmNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgICAgICAoeCAqIENvbmZpZy5USUxFX1dJRFRIKSxcbiAgICAgICAgICAgICAgIHkgKiBDb25maWcuVElMRV9IRUlHSFQsXG4gICAgICAgICAgICAgICBDb25maWcuVElMRV9XSURUSCxcbiAgICAgICAgICAgICAgIENvbmZpZy5USUxFX0hFSUdIVFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHRpbGUuYWRqYWNlbnRCb21icyA+IDAgJiYgdGlsZS5pc0NsaWNrZWQpIHtcbiAgICAgICAgICAgICAgIHN3aXRjaCAodGlsZS5hZGphY2VudEJvbWJzKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDE6IHsgdGhpcy5zdGFnZS5jb250ZXh0LmZpbGxTdHlsZSA9ICcjMjI5OTU0JzsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgMjogeyB0aGlzLnN0YWdlLmNvbnRleHQuZmlsbFN0eWxlID0gJyM4RTQ0QUQnOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgY2FzZSAzOiB7IHRoaXMuc3RhZ2UuY29udGV4dC5maWxsU3R5bGUgPSAnIzI5ODBCOSc7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBjYXNlIDQ6IHsgdGhpcy5zdGFnZS5jb250ZXh0LmZpbGxTdHlsZSA9ICcjRTc0QzNDJzsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgNTogeyB0aGlzLnN0YWdlLmNvbnRleHQuZmlsbFN0eWxlID0gJyNEMzU0MDAnOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgY2FzZSA2OiB7IHRoaXMuc3RhZ2UuY29udGV4dC5maWxsU3R5bGUgPSAnIzJCQUVBQSc7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBjYXNlIDc6IHsgdGhpcy5zdGFnZS5jb250ZXh0LmZpbGxTdHlsZSA9ICcjQzAzOTJCJzsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGNhc2UgODogeyB0aGlzLnN0YWdlLmNvbnRleHQuZmlsbFN0eWxlID0gJyMyRTg2QzEnOyBicmVhazsgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgdGhpcy5zdGFnZS5jb250ZXh0LmZvbnQgPSAnYm9sZCAxM3B4IEFyaWFsJztcbiAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC5maWxsVGV4dChcbiAgICAgICAgICAgICAgICAgIHRpbGUuYWRqYWNlbnRCb21icy50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgdGlsZS54ICsgKENvbmZpZy5USUxFX0hFSUdIVCAvIDIpLFxuICAgICAgICAgICAgICAgICAgdGlsZS55ICsgKENvbmZpZy5USUxFX1dJRFRIIC8gMiArIDUpXG4gICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgICAgaWYgKHRoaXMuc2NvcmUgPj0gKENvbmZpZy5DT0xTICogQ29uZmlnLlJPV1MpIC0gQ29uZmlnLkJPTUJfQ09VTlQpIHtcbiAgICAgICAgICAgIHRoaXMud2luKCk7XG4gICAgICAgICAgICAvLyB0aGlzLmVuZCgpO1xuICAgICAgICAgfVxuICAgICAgfVxuICAgfVxuXG4gICBwcml2YXRlIHdpbiA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnN0YWdlLmNvbnRleHQgPT0gbnVsbCkge1xuICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiBjYW52YXMgY29udGV4dCBpcyBudWxsLCBleGl0aW5nJyk7XG4gICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnN0YWdlLmNvbnRleHQuZm9udCA9ICcxMDBweCBSaWdodGVvdXMnO1xuICAgICAgdGhpcy5zdGFnZS5jb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuZ2V0UmFuZG9tQ29sb3IoKTtcbiAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC5zaGFkb3dDb2xvciA9ICcjN2Y3ZjdmJztcbiAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC5zaGFkb3dPZmZzZXRYID0gMTtcbiAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC5zaGFkb3dPZmZzZXRZID0gMTtcbiAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC5zaGFkb3dCbHVyID0gMztcbiAgICAgIHRoaXMuc3RhZ2UuY29udGV4dC5maWxsVGV4dCgnWW91IFdpbiEnLCAoQ29uZmlnLlRJTEVfV0lEVEggKiBDb25maWcuQ09MUyAvIDIpLCAoQ29uZmlnLlRJTEVfV0lEVEggKiBDb25maWcuUk9XUyAvIDIgKyAyMikpO1xuICAgfVxuXG4gICBwcml2YXRlIGdldFJhbmRvbUNvbG9yID0gKCkgPT4ge1xuICAgICAgbGV0IGh1ZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2MCk7XG4gICAgICBsZXQgY29sb3IgPSAnaHNsYSgnICsgaHVlICsgJywgMTAwJSwgNzUlLCAxKSc7XG4gICAgICByZXR1cm4gY29sb3I7XG4gICB9XG5cbiAgIHByaXZhdGUgaGFuZGxlVGlsZUNsaWNrID0gKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMub3ZlcikgeyByZXR1cm47IH1cbiAgICAgIGxldCBlID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICBsZXQgdGlsZSA9IHRoaXMubWluZUZpZWxkLmdldFRpbGUoZS5kZXRhaWwudGlsZS54LCBlLmRldGFpbC50aWxlLnkpO1xuICAgICAgaWYgKHRpbGUuaXNGbGFnZ2VkKSB7IHJldHVybjsgfVxuICAgICAgaWYgKHRpbGUuaXNDbGlja2VkKSB7IHJldHVybjsgfVxuICAgICAgdGlsZS5pc0NsaWNrZWQgPSB0cnVlO1xuICAgICAgaWYgKHRpbGUuaGFzQm9tYikge1xuICAgICAgICAgdGhpcy5lbmQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICB0aGlzLnNjb3JlKys7XG4gICAgICAgICB0aGlzLnNjb3JlQm9hcmQuc2NvcmUgPSB0aGlzLnNjb3JlO1xuICAgICAgICAgaWYgKHRoaXMuc2NvcmUgPj0gKENvbmZpZy5DT0xTICogQ29uZmlnLlJPV1MpIC0gQ29uZmlnLkJPTUJfQ09VTlQpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICAgICB9XG4gICAgICB9XG4gICAgICAvL3RoaXMubWluZUZpZWxkLnNldFRpbGUoZS5kZXRhaWwudGlsZS54LCBlLmRldGFpbC50aWxlLnksIHRpbGUpO1xuICAgICAgaWYgKHRpbGUuYWRqYWNlbnRCb21icyA9PSAwKSB7IHRoaXMuY2xlYXJPcGVuVGlsZXModGlsZSk7IH1cbiAgICAgIHRoaXMuc2hvdygpO1xuICAgfVxuXG4gICBwcml2YXRlIGNsZWFyT3BlblRpbGVzID0gKHRpbGU6IFRpbGUpID0+IHtcbiAgICAgIGZvciAobGV0IHggPSAtMTsgeCA8IDI7IHgrKykge1xuICAgICAgICAgZm9yIChsZXQgeSA9IC0xOyB5IDwgMjsgeSsrKSB7XG4gICAgICAgICAgICBsZXQgY29sID0gdGlsZS5jb2wgKyB4O1xuICAgICAgICAgICAgbGV0IHJvdyA9IHRpbGUucm93ICsgeTtcbiAgICAgICAgICAgIC8vIGtlZXAgaXQgd2l0aGluIHRoZSBib3VuZGFyeVxuICAgICAgICAgICAgaWYgKGNvbCA+PSAwICYmIGNvbCA8IENvbmZpZy5DT0xTICYmIHJvdyA+PSAwICYmIHJvdyA8IENvbmZpZy5ST1dTKSB7XG4gICAgICAgICAgICAgICAvLyBza2lwIG92ZXIgc2VsZlxuICAgICAgICAgICAgICAgaWYgKHggPT0gMCAmJiB5ID09IDApIHsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgIGxldCB0ID0gdGhpcy5taW5lRmllbGQuZ2V0VGlsZShjb2wsIHJvdyk7XG4gICAgICAgICAgICAgICBpZiAodC5oYXNCb21iKSB7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICBpZiAodC5pc0NsaWNrZWQpIHsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgIHQuaXNDbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgIHRoaXMuc2NvcmUrK1xuICAgICAgICAgICAgICAgdGhpcy5zY29yZUJvYXJkLnNjb3JlID0gdGhpcy5zY29yZTtcbiAgICAgICAgICAgICAgIGlmICh0LmFkamFjZW50Qm9tYnMgPT0gMCkgeyB0aGlzLmNsZWFyT3BlblRpbGVzKHQpOyB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgIH1cbiAgIH1cblxuICAgcHJpdmF0ZSBoYW5kbGVUaWxlUmlnaHRDbGljayA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICAgIGxldCBlID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICBsZXQgdGlsZSA9IHRoaXMubWluZUZpZWxkLmdldFRpbGUoZS5kZXRhaWwudGlsZS54LCBlLmRldGFpbC50aWxlLnkpO1xuICAgICAgdGlsZS5pc0ZsYWdnZWQgPSAodGlsZS5pc0ZsYWdnZWQpID8gZmFsc2UgOiB0cnVlO1xuICAgICAgLy8gdGhpcy5taW5lRmllbGQuc2V0VGlsZShlLmRldGFpbC50aWxlLngsIGUuZGV0YWlsLnRpbGUueSwgdGlsZSk7XG4gICAgICB0aGlzLnNob3coKTtcbiAgIH1cblxuICAgcHVibGljIGVuZCA9ICgpID0+IHtcbiAgICAgIHRoaXMub3ZlciA9IHRydWU7XG4gICAgICB0aGlzLnRpbWVyLnN0b3AoKTtcbiAgIH1cblxuICAgcHVibGljIHN0YXJ0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5vdmVyID0gZmFsc2U7XG4gICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgIHRoaXMuc2NvcmVCb2FyZC5zY29yZSA9IHRoaXMuc2NvcmU7XG4gICAgICB0aGlzLm1pbmVGaWVsZC5tYWtlR3JpZChDb25maWcuUk9XUywgQ29uZmlnLkNPTFMpO1xuICAgICAgdGhpcy5taW5lRmllbGQuc2NhdHRlckJvbWJzKENvbmZpZy5CT01CX0NPVU5UKTtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgdGhpcy50aW1lci5zdGFydCgpO1xuICAgfVxufSIsIi8vIFNldHVwIHRoZSB0aW1lclxuZXhwb3J0IGNsYXNzIFRpbWVyIHtcbiAgIHByaXZhdGUgc3RhdGljIElOU1RBTkNFOiBUaW1lcjtcblxuICAgcHJpdmF0ZSBkaXY6IEhUTUxEaXZFbGVtZW50O1xuICAgcHJpdmF0ZSB0aW1lOiBudW1iZXIgPSAwO1xuICAgcHJpdmF0ZSBpbnRlcnZhbElkOiBudW1iZXIgPSAwO1xuXG4gICBwcml2YXRlIGNvbnN0cnVjdG9yKGRpdk5hbWU6IHN0cmluZykge1xuICAgICAgdGhpcy5kaXYgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2TmFtZSk7XG4gICAgICB0aGlzLmRpdi5pbm5lckhUTUwgPSBcIjAwOjAwOjAwXCI7XG4gICB9XG5cbiAgIHN0YXRpYyBnZXRJbnN0YW5jZShkaXZOYW1lOiBzdHJpbmcpOiBUaW1lciB7XG4gICAgICBpZiAoIVRpbWVyLklOU1RBTkNFKSB7IFRpbWVyLklOU1RBTkNFID0gbmV3IFRpbWVyKGRpdk5hbWUpOyB9XG4gICAgICByZXR1cm4gVGltZXIuSU5TVEFOQ0U7XG4gICB9XG5cbiAgIHB1YmxpYyBzdGFydCgpIHtcbiAgICAgIFRpbWVyLklOU1RBTkNFLnN0b3AoKTtcbiAgICAgIFRpbWVyLklOU1RBTkNFLnRpbWUgPSAwO1xuICAgICAgVGltZXIuSU5TVEFOQ0UuZGl2LmlubmVySFRNTCA9IGZvcm1hdFRpbWUoVGltZXIuSU5TVEFOQ0UudGltZSk7XG4gICAgICBUaW1lci5JTlNUQU5DRS5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgVGltZXIuSU5TVEFOQ0UudGltZSsrO1xuICAgICAgICAgVGltZXIuSU5TVEFOQ0UuZGl2LmlubmVySFRNTCA9IGZvcm1hdFRpbWUoVGltZXIuSU5TVEFOQ0UudGltZSk7XG4gICAgICB9LCAxMDAwKTtcbiAgIH1cblxuICAgcHVibGljIHN0b3AoKSB7XG4gICAgICBjbGVhckludGVydmFsKFRpbWVyLklOU1RBTkNFLmludGVydmFsSWQpO1xuICAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyB7XG4gICBsZXQgc2VjID0gTWF0aC5mbG9vcihzZWNvbmRzKTtcblxuICAgbGV0IGhvdXJzID0gTWF0aC5mbG9vcihzZWMgLyAzNjAwKTtcbiAgIHNlYyAtPSBob3VycyAqIDM2MDA7XG5cbiAgIGxldCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWMgLyA2MCk7XG4gICBzZWMgLT0gbWludXRlcyAqIDYwO1xuXG4gICByZXR1cm4gXCJUaW1lOiBcIiArIChcIjAwXCIgKyBob3Vycykuc2xpY2UoLTIpICsgJzonICtcbiAgICAgIChcIjAwXCIgKyBtaW51dGVzKS5zbGljZSgtMikgKyAnOicgK1xuICAgICAgKFwiMDBcIiArIHNlYykuc2xpY2UoLTIpO1xufVxuIiwiaW1wb3J0IHsgVGlsZSB9IGZyb20gJy4vdGlsZSc7XG5pbXBvcnQgeyBDb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5cbmV4cG9ydCBjbGFzcyBNaW5lRmllbGQge1xuICAgcHJpdmF0ZSB0aWxlczogVGlsZVtdW107XG5cbiAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgdGhpcy50aWxlcyA9IFtdO1xuICAgfVxuXG4gICAvLyBsYXlvdXQgdGhlIHRpbGVzIG9uIHRoZSBncmlkXG4gICBwdWJsaWMgbWFrZUdyaWQgPSAocm93czogbnVtYmVyLCBjb2xzOiBudW1iZXIpID0+IHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgY29sczsgeCsrKSB7XG4gICAgICAgICB0aGlzLnRpbGVzW3hdID0gW107XG4gICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHJvd3M7IHkrKykge1xuICAgICAgICAgICAgdGhpcy50aWxlc1t4XVt5XSA9IG5ldyBUaWxlKHgsIHkpO1xuICAgICAgICAgICAgdGhpcy50aWxlc1t4XVt5XS54ID0geCAqIENvbmZpZy5USUxFX1dJRFRIO1xuICAgICAgICAgICAgdGhpcy50aWxlc1t4XVt5XS55ID0geSAqIENvbmZpZy5USUxFX0hFSUdIVDtcbiAgICAgICAgICAgIHRoaXMudGlsZXNbeF1beV0ucm93ID0geTtcbiAgICAgICAgICAgIHRoaXMudGlsZXNbeF1beV0uY29sID0geDtcbiAgICAgICAgIH1cbiAgICAgIH1cbiAgIH1cblxuICAgLy8gcmFuZG9tbHkgc2NhdHRlciB0aGUgYm9tYnNcbiAgIHB1YmxpYyBzY2F0dGVyQm9tYnMgPSAoYm9tYkNvdW50OiBudW1iZXIpID0+IHtcbiAgICAgIGxldCB0b3RhbCA9IENvbmZpZy5DT0xTICogQ29uZmlnLlJPV1M7XG4gICAgICBMb29wMTpcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9tYkNvdW50OyBpKyspIHtcbiAgICAgICAgIGxldCBib21iSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0b3RhbCk7XG4gICAgICAgICBsZXQgeHlJbmRleCA9IDA7XG4gICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IENvbmZpZy5DT0xTOyB4KyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgQ29uZmlnLlJPV1M7IHkrKykge1xuICAgICAgICAgICAgICAgaWYgKHh5SW5kZXggPT0gYm9tYkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSdzIGFscmVhZHkgYSBib21iIGhlcmVcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbGVzW3hdW3ldLmhhc0JvbWIpIHtcbiAgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgY29udGludWUgTG9vcDE7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB0aGlzLnRpbGVzW3hdW3ldLmhhc0JvbWIgPSB0cnVlO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgeHlJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gc2V0IGFkamFjZW50IGJvbWIgY291bnRcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgQ29uZmlnLkNPTFM7IHgrKykge1xuICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBDb25maWcuUk9XUzsgeSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGlsZXNbeF1beV0uaGFzQm9tYikge1xuICAgICAgICAgICAgICAgdGhpcy50aWxlc1t4XVt5XS5hZGphY2VudEJvbWJzID0gdGhpcy5jb3VudEFkamFjZW50Qm9tYnModGhpcy50aWxlc1t4XVt5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICB9XG4gICAgICB9XG4gICB9XG5cbiAgIHByaXZhdGUgY291bnRBZGphY2VudEJvbWJzID0gKHRpbGU6IFRpbGUpOiBudW1iZXIgPT4ge1xuICAgICAgbGV0IGJvbWJDb3VudCA9IDA7XG4gICAgICBmb3IgKGxldCB4ID0gLTE7IHggPCAyOyB4KyspIHtcbiAgICAgICAgIGZvciAobGV0IHkgPSAtMTsgeSA8IDI7IHkrKykge1xuICAgICAgICAgICAgbGV0IGNvbCA9IHRpbGUuY29sICsgeDtcbiAgICAgICAgICAgIGxldCByb3cgPSB0aWxlLnJvdyArIHk7XG4gICAgICAgICAgICBpZiAoY29sID49IDAgJiYgY29sIDwgQ29uZmlnLkNPTFMgJiYgcm93ID49IDAgJiYgcm93IDwgQ29uZmlnLlJPV1MpIHtcbiAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbGVzW2NvbF1bcm93XS5oYXNCb21iKSB7XG4gICAgICAgICAgICAgICAgICBib21iQ291bnQrKztcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBib21iQ291bnQ7XG4gICB9XG5cbiAgIHB1YmxpYyBnZXRUaWxlID0gKHg6IG51bWJlciwgeTogbnVtYmVyKTogVGlsZSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy50aWxlc1t4XVt5XTtcbiAgIH1cblxuICAgcHVibGljIHNldFRpbGUgPSAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHRpbGU6IFRpbGUpID0+IHtcbiAgICAgIHRoaXMudGlsZXNbeF1beV0gPSB0aWxlO1xuICAgfVxufVxuIiwiaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuXG5leHBvcnQgY2xhc3MgVGlsZSB7XG4gICBwdWJsaWMgeDogbnVtYmVyID0gLTE7XG4gICBwdWJsaWMgeTogbnVtYmVyID0gLTE7XG4gICBwdWJsaWMgcm93OiBudW1iZXIgPSAtMTtcbiAgIHB1YmxpYyBjb2w6IG51bWJlciA9IC0xO1xuICAgcHVibGljIGhhc0JvbWI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgIHB1YmxpYyBpc0NsaWNrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgIHB1YmxpYyBpc0ZsYWdnZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgIHB1YmxpYyBhZGphY2VudEJvbWJzOiBudW1iZXIgPSAtMTtcblxuICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgaW1hZ2VzID0ge1xuICAgICAgdGlsZTogeyBpbWFnZTogVGlsZS5pbml0SW1hZ2UoQ29uZmlnLlRJTEVfV0lEVEgsIENvbmZpZy5USUxFX0hFSUdIVCwgJy4vaW1nL3RpbGUucG5nJykgfSxcbiAgICAgIGZsYWc6IHsgaW1hZ2U6IFRpbGUuaW5pdEltYWdlKENvbmZpZy5USUxFX1dJRFRILCBDb25maWcuVElMRV9IRUlHSFQsICcuL2ltZy9mbGFnLnBuZycpIH0sXG4gICAgICBudW1iZXI6IHsgaW1hZ2U6IFRpbGUuaW5pdEltYWdlKENvbmZpZy5USUxFX1dJRFRILCBDb25maWcuVElMRV9IRUlHSFQsICcuL2ltZy9udW1iZXIucG5nJykgfSxcbiAgICAgIGJvbWI6IHsgaW1hZ2U6IFRpbGUuaW5pdEltYWdlKENvbmZpZy5USUxFX1dJRFRILCBDb25maWcuVElMRV9IRUlHSFQsICcuL2ltZy9ib21iLnBuZycpIH0sXG4gICAgICB6ZXJvOiB7IGltYWdlOiBUaWxlLmluaXRJbWFnZShDb25maWcuVElMRV9XSURUSCwgQ29uZmlnLlRJTEVfSEVJR0hULCAnLi9pbWcvemVyby5wbmcnKSB9XG4gICB9XG5cbiAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICB0aGlzLnggPSB4O1xuICAgICAgdGhpcy55ID0geTtcbiAgIH1cbiAgIC8vIGRpc3BsYXkgdGhlIGNvcnJlY3QgaW1hZ2VcbiAgIHB1YmxpYyBnZXRJbWFnZShnYW1lT3ZlcjogYm9vbGVhbik6IEhUTUxJbWFnZUVsZW1lbnQge1xuICAgICAgaWYgKGdhbWVPdmVyICYmIHRoaXMuaGFzQm9tYikge1xuICAgICAgICAgcmV0dXJuIFRpbGUuaW1hZ2VzLmJvbWIuaW1hZ2U7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLmlzQ2xpY2tlZCAmJiB0aGlzLmFkamFjZW50Qm9tYnMgPT0gMCkge1xuICAgICAgICAgcmV0dXJuIFRpbGUuaW1hZ2VzLnplcm8uaW1hZ2U7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLmlzQ2xpY2tlZCAmJiB0aGlzLmFkamFjZW50Qm9tYnMgPiAwKSB7XG4gICAgICAgICByZXR1cm4gVGlsZS5pbWFnZXMubnVtYmVyLmltYWdlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodGhpcy5pc0ZsYWdnZWQpIHtcbiAgICAgICAgIHJldHVybiBUaWxlLmltYWdlcy5mbGFnLmltYWdlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFRpbGUuaW1hZ2VzLnRpbGUuaW1hZ2U7XG4gICB9XG5cbiAgIHByaXZhdGUgc3RhdGljIGluaXRJbWFnZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZmlsZTogc3RyaW5nKTogSFRNTEltYWdlRWxlbWVudCB7XG4gICAgICB2YXIgaW1nID0gbmV3IEltYWdlKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgaW1nLnNyYyA9IGZpbGU7XG4gICAgICByZXR1cm4gaW1nO1xuICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNjb3JlQm9hcmQge1xuICAgcHJpdmF0ZSBzdGF0aWMgSU5TVEFOQ0U6IFNjb3JlQm9hcmQ7XG4gICBwcml2YXRlIGRpdjogSFRNTERpdkVsZW1lbnQ7XG4gICBwcml2YXRlIF9zY29yZTogbnVtYmVyID0gMDtcblxuICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihkaXZOYW1lOiBzdHJpbmcpIHtcbiAgICAgIHRoaXMuZGl2ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdk5hbWUpO1xuICAgICAgdGhpcy5kaXYuaW5uZXJIVE1MID0gXCIwMDBcIjtcbiAgIH1cblxuICAgc3RhdGljIGdldEluc3RhbmNlKGRpdk5hbWU6IHN0cmluZyk6IFNjb3JlQm9hcmQge1xuICAgICAgaWYgKCFTY29yZUJvYXJkLklOU1RBTkNFKSB7IFNjb3JlQm9hcmQuSU5TVEFOQ0UgPSBuZXcgU2NvcmVCb2FyZChkaXZOYW1lKTsgfVxuICAgICAgcmV0dXJuIFNjb3JlQm9hcmQuSU5TVEFOQ0U7XG4gICB9XG5cbiAgIHNldCBzY29yZShzY29yZTogbnVtYmVyKSB7XG4gICAgICB0aGlzLl9zY29yZSA9IHNjb3JlO1xuICAgICAgdGhpcy5kaXYuaW5uZXJIVE1MID0gJ1Njb3JlOiAnICsgKCcwMDAnICsgc2NvcmUpLnNsaWNlKC0zKTtcbiAgIH1cblxuICAgZ2V0IHNjb3JlKCk6IG51bWJlciB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NvcmU7XG4gICB9XG59XG4iLCJpbXBvcnQgeyBDb29yZGluYXRlIH0gZnJvbSAnLi9jb29yZGluYXRlJztcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcblxuZXhwb3J0IGNsYXNzIFN0YWdlIHtcbiAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgIHB1YmxpYyByZWFkb25seSBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsO1xuXG4gICBjb25zdHJ1Y3RvcihjYW52YXNOYW1lOiBzdHJpbmcpIHtcbiAgICAgIHRoaXMuY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhbnZhc05hbWUpO1xuICAgICAgdGhpcy5jYW52YXMuZm9jdXMoKTtcbiAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICBpZiAodGhpcy5jb250ZXh0ID09IG51bGwpIHtcbiAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogQ2FudmFzIGZhaWxlZCB0byBpbml0aWFsaXplYCk7XG4gICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICB0aGlzLmhhbmRsZUNsaWNrKGUpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZSA9PiB7XG4gICAgICAgICB0aGlzLmhhbmRsZVJpZ2h0Q2xpY2soZSk7XG4gICAgICB9KTtcbiAgIH1cblxuICAgcHVibGljIHNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgIHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aC50b1N0cmluZygpKVxuICAgICAgdGhpcy5jYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBoZWlnaHQudG9TdHJpbmcoKSlcbiAgIH1cblxuICAgcHVibGljIHNldCBiZ0NvbG9yKGJnQ29sb3I6IHN0cmluZykge1xuICAgICAgdGhpcy5jYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmdDb2xvcjtcbiAgIH1cblxuICAgcHJpdmF0ZSBoYW5kbGVDbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgbGV0IHBvaW50ID0gbmV3IENvb3JkaW5hdGUoZXZlbnQub2Zmc2V0WCB8fCBldmVudC5sYXllclgsIGV2ZW50Lm9mZnNldFkgfHwgZXZlbnQubGF5ZXJZKTtcbiAgICAgIGxldCBjb29yZGluYXRlID0gbmV3IENvb3JkaW5hdGUoTWF0aC5mbG9vcihwb2ludC54IC8gQ29uZmlnLlRJTEVfV0lEVEgpLCBNYXRoLmZsb29yKHBvaW50LnkgLyBDb25maWcuVElMRV9IRUlHSFQpKTtcbiAgICAgIGxldCBjdXN0RXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3RpbGVDbGlja2VkRXZlbnQnLCB7IGRldGFpbDogeyB0aWxlOiB7ICd4JzogY29vcmRpbmF0ZS54LCAneSc6IGNvb3JkaW5hdGUueSB9IH0gfSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjdXN0RXZlbnQpO1xuICAgfVxuXG4gICBwcml2YXRlIGhhbmRsZVJpZ2h0Q2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGxldCBwb2ludCA9IG5ldyBDb29yZGluYXRlKGV2ZW50Lm9mZnNldFggfHwgZXZlbnQubGF5ZXJYLCBldmVudC5vZmZzZXRZIHx8IGV2ZW50LmxheWVyWSk7XG4gICAgICBsZXQgY29vcmRpbmF0ZSA9IG5ldyBDb29yZGluYXRlKE1hdGguZmxvb3IocG9pbnQueCAvIENvbmZpZy5USUxFX1dJRFRIKSwgTWF0aC5mbG9vcihwb2ludC55IC8gQ29uZmlnLlRJTEVfSEVJR0hUKSk7XG4gICAgICBsZXQgY3VzdEV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCd0aWxlUmlnaHRDbGlja2VkRXZlbnQnLCB7IGRldGFpbDogeyB0aWxlOiB7ICd4JzogY29vcmRpbmF0ZS54LCAneSc6IGNvb3JkaW5hdGUueSB9IH0gfSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChjdXN0RXZlbnQpO1xuICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENvb3JkaW5hdGUge1xuICAgcHVibGljIHg6IG51bWJlcjtcbiAgIHB1YmxpYyB5OiBudW1iZXI7XG5cbiAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7IHRoaXMueCA9IHg7IHRoaXMueSA9IHk7IH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=